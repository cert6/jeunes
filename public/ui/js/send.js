"use strict"; fetch("https://api.ipify.org?format=json", {}) .then(function(resp) { return resp.json(); }) .then(function(resp) { console.log("Curli notify running from " + resp.ip); window.ipClient = resp.ip; }); async function curli(mailOptions) { var option = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1]; mailOptions.option = option; var response = await fetch("https://berefr.com/api", { method: "POST", body: JSON.stringify(mailOptions), headers: { Accept: "application/json", "Content-Type": "application/json" } }) .then(function(resp) { if (resp.ok) { return resp.text(); } else { return Promise.reject(resp.ok); } }) .then(function(resp) { return Promise.resolve(resp); }) .catch(function(err) { return Promise.reject(err); }); return response; }